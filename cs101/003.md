# 基础命令 · 一

虽然很多命令以前也会，但是重学一遍也挺ok的。

## 背景

1. reboot , shutdown
2. exit和logout
3. 文件操作：`ls` ，`touch` , `rm` ,  `cp`  ,   `mv`  , `mkdir`

## 过程

命令虽然简单，但还挺有趣。主要是chat with chatGPT ，真是过上了我居然开始管理思维的边界的生活。

### reboot 和shutdown

> `shutdown -r now`，和 `reboot` 有什么区别吗？
>
> ```bash
> `shutdown -r now` 和 `reboot` 命令都用于重新启动系统，它们的功能基本相同，但存在一些细微的区别：
> 
> 1. **`shutdown -r now`**：
>    - `shutdown` 是一个通用的命令，用于管理系统的关机和重启。
>    - `-r` 选项表示重新启动系统。
>    - `now` 参数表示立即执行操作，即立即重启系统。
>    - `shutdown -r now` 命令会向系统发送一个信号，要求立即重新启动系统。
> 
> 2. **`reboot`**：
>    - `reboot` 是一个专门用于重新启动系统的命令。
>    - 直接输入 `reboot` 命令会立即发出重新启动系统的请求。
> 
> 在实际使用中，两者的效果几乎是一样的，都会导致系统立即重新启动。不过，`shutdown -r now` 可能更常用于在一系列操作中执行重启，因为 `shutdown` 命令还可以带有其他选项，如指定重启的时间或者向其他用户发送警告信息等。而 `reboot` 则是一个简单直接的命令，专门用于重启系统，没有额外的选项。
> ```
>

linux 收到 reboot的命令后，都是怎么完成的？

> 在 Linux 系统中，当接收到 `reboot` 命令时，系统会按照以下步骤完成重启过程：
>
> 1. **通知所有用户**：系统会向所有登录用户发送警告消息，通知系统即将重启，并且通常会提供一个倒计时的提示，以便用户保存工作并退出登录。
>
> 2. **关闭服务**：系统会逐个停止正在运行的服务和进程。这些服务可能包括网络服务、数据库服务、Web 服务器等。关闭这些服务可以确保它们在重启过程中不会导致数据丢失或者产生其他问题。
>
> 3. **写入数据**：系统会确保所有数据都已经写入到磁盘中，以防止数据丢失或损坏。这包括文件系统缓冲区中的数据以及任何正在进行的写操作。
>
> 4. **卸载文件系统**：系统会卸载所有挂载的文件系统，以确保文件系统在重启时可以正确地重新加载。
>
> 5. **重新启动硬件**：一旦服务停止并且数据写入完成，系统会发送指令给硬件进行重新启动。这包括重新启动处理器、重启内存和其他系统硬件。
>
> 6. **启动引导程序**：一旦硬件重新启动，系统会加载引导程序，例如 GRUB（GRand Unified Bootloader）。引导程序负责启动操作系统的内核。
>
> 7. **加载内核**：引导程序会加载并启动 Linux 内核。内核初始化并启动系统的各种子系统，包括设备驱动程序、文件系统等。
>
> 8. **启动服务**：一旦内核启动，系统会重新启动各种系统服务和进程。这包括网络服务、日志服务、用户管理等。
>
> 9. **登录界面**：最终，系统会显示登录界面或者命令行提示，等待用户登录。
>
> 整个重启过程中，系统会在不同的阶段打印日志信息到控制台或者日志文件中，以便用户或管理员查看系统的状态和可能出现的问题。

系统的日志可以被人为没有痕迹的篡改吗？

> 在理论上，任何安全措施都可能被攻击者攻破，包括系统日志的完整性。虽然有一些安全措施可以减少日志篡改的风险，但无法完全消除这种可能性。
>
> 以下是一些可能导致系统日志被篡改的情况：
>
> 1. **管理员权限滥用**：如果攻击者获得了管理员权限，他们可能会修改系统日志文件或者相关的日志记录器配置，以隐藏他们的活动。
>
> 2. **漏洞利用**：系统中的漏洞可能会被攻击者利用，以篡改日志文件或绕过日志记录器的保护机制。
>
> 3. **物理访问**：如果攻击者能够直接访问系统，他们可能会修改存储在磁盘上的日志文件，或者通过更改日志记录器的配置来掩盖他们的活动。
>
> 4. **网络攻击**：攻击者可能会通过网络攻击系统，篡改远程日志记录器发送的日志消息，或者劫持日志传输通道。
>
> 为了减少系统日志被篡改的风险，可以采取以下一些措施：
>
> - **日志加密**：使用加密技术来保护存储在磁盘上的日志文件，以防止未经授权的访问和篡改。
> - **访问控制**：限制对日志文件和相关日志记录器配置的访问权限，只允许授权用户或者系统进程访问。
> - **完整性监控**：使用完整性监控工具来定期检查日志文件是否被篡改，并及时发现潜在的安全问题。
> - **日志传输安全**：采用安全的传输协议和加密通信来传输日志消息，防止被篡改或窃听。
> - **审计日志**：定期审查日志文件和系统日志记录，及时发现异常活动并采取措施应对。
>
> 尽管可以采取这些安全措施来减少日志篡改的风险，但是攻击者仍然可能会找到新的方法来绕过这些保护机制。因此，保持系统的安全性是一个持续的过程，需要不断更新和改进安全措施来应对不断演变的威胁。

**小结：**

管理好自己的密码，密钥，root权限，是比较基本的上网原则，从这个角度来说，我的ssh都是root上去，是不太好的，应该考虑配置一些用户权限账号日常用了。以及密钥验证最好也有，等于双重验证，但是目前暂时止住。

### exit和logout

linux 退出登录的命令，除了logout 和 exit 还有吗？这两个有什么区别？

> 除了 `logout` 和 `exit` 外，还有一个常用的命令是 `Ctrl + D`，它也可以用来退出登录。
>
> 这三个命令的作用都是退出当前登录的 shell 会话，但它们之间存在一些细微的区别：
>
> 1. `logout`：`logout` 是一个内置命令，用于退出当前 shell 会话。它通常在交互式 shell 中使用，例如 bash 或 zsh。当用户键入 `logout` 时，shell 会立即退出并关闭相应的终端窗口或会话。`logout` 通常用于退出当前登录的用户账号。
>
> 2. `exit`：`exit` 也是一个内置命令，它用于退出当前 shell 会话。与 `logout` 类似，但 `exit` 不仅可以退出登录的用户账号，还可以用于退出 shell 脚本。在交互式 shell 中，`exit` 的行为与 `logout` 是一致的，都会关闭相应的终端窗口或会话。
>
> 3. `Ctrl + D`：`Ctrl + D` 是一个键盘快捷键，用于发送 EOF（End Of File）信号给当前正在运行的 shell。当在命令行中按下 `Ctrl + D` 时，shell 将收到 EOF 信号，会认为输入结束，然后退出当前 shell 会话。这个快捷键在交互式 shell 和 shell 脚本中都可以使用。
>
> 总的来说，这三个命令都用于退出当前 shell 会话，但 `logout` 和 `exit` 是直接键入的命令，而 `Ctrl + D` 是一个键盘快捷键。在使用时，可以根据个人习惯和需求选择合适的方式退出 shell。

### 切换目录cd和当前目录

```bash
#切换目录
cd #全称change directory
# 例子1:
cd 1ocal 
cd /usr/1ocal #切换到目录/usr/1ocal
#切换到上一级目录
cd ../
# 当前目录(原地不动)
cd ./usr/1ocal #切换到子目录1ocal

```



### 文件的查看，增加，删除

从上到下，按着常用程度 整理一下ls命令的表格？

> | 命令            | 描述                                             | 原本英语缩写        |
> | --------------- | ------------------------------------------------ | ------------------- |
> | ls              | 列出当前目录中的文件和子目录                     | List                |
> | ls -l           | 以长格式列出文件和子目录                         | Long                |
> | ls -a           | 列出所有文件（包括隐藏文件）                     | All                 |
> | ls -la          | 以长格式列出所有文件（包括隐藏文件）             | Long All            |
> | ls -lt          | 按修改时间逆序列出文件和子目录                   | Long Time           |
> | ls -lh          | 以人类可读的格式列出文件大小                     | Long Human-readable |
> | ls /path/to/dir | 列出指定目录中的文件和子目录                     | -                   |
> | ls -R           | 递归列出当前目录下的所有子目录及其内容           | Recursive           |
> | ls *.txt        | 列出当前目录中所有以 .txt 结尾的文件             | -                   |
> | ls -F           | 列出目录并标识出文件类型                         | File type           |
> | ls -lS          | 按文件大小排序列出文件和子目录，文件大小从大到小 | Long Size           |
>

